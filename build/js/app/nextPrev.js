define(["jquery","TweenMax","signals","../app/pageInfo"],function(a,b,c,d){var e,f,g,h,i,j={bgLeftPrct:-750,bgRightPrct:-750},k="",l="",m=!0,n=.15,o={};o.on={nextPressed:new c.Signal,prevPressed:new c.Signal,backToTheReelPress:new c.Signal},o.init=function(){e=a(".next-prev"),f=a(".back-to-the-reel"),g=a(".next-button"),h=a(".prev-button"),f.click(function(a){a.preventDefault(),o.on.backToTheReelPress.dispatch()}),g.on("mouseover",v),g.on("mouseout",y),g.on("click",w),g.on("touchstart",s),g.on("touchend",t),h.on("mouseover",v),h.on("mouseout",y),h.on("click",w),h.on("touchstart",s),h.on("touchend",t)};var p,q=function(){h.children(".transverse-nav-bg").css("left",j.bgLeftPrct+"%"),g.children(".transverse-nav-bg").css("right",j.bgRightPrct+"%")},r=function(b){return a(b).hasClass("prev-button")},s=function(c){p=c.target;var d=c.currentTarget,e=a(d).children(".transverse-nav-bg")[0],f={autoAlpha:1};r(d)?f.left="-600%":f.right="-600%",b.set(d,{autoAlpha:1}),b.set(e,f)},t=function(c){if(p==c.target)w(c);else{var d=c.currentTarget,e=a(d).children(".transverse-nav-bg")[0];b.to(d,.3,{autoAlpha:n}),b.to(e,.5,{autoAlpha:0})}},u=function(){i.project?(a(".prev-button .menu-icon").removeClass("about"),a(".next-button .menu-icon").removeClass("about")):(a(".prev-button .menu-icon").addClass("about"),a(".next-button .menu-icon").addClass("about"))},v=function(c){if(!m){var d=c.currentTarget,e=a(d).children(".transverse-nav-bg")[0],f={autoAlpha:1,ease:Power3.easeOut},g={ease:Power3.easeOut,onUpdate:q};r(d)?(f.left=20,g.bgLeftPrct=-500):(f.right=20,g.bgRightPrct=-500),b.to(d,.3,f),b.to(e,.3,{autoAlpha:1,ease:Power3.easeOut}),b.to(j,.3,g)}},w=function(a){var b=r(a.currentTarget)?d.getPrevPageId(i.id):d.getNextPageId(i.id);window.location.hash="#/folio/"+b+"/"},x=function(c,d){var e=a(c).children(".transverse-nav-bg")[0],f={autoAlpha:d,ease:Power3.easeInOut},g={ease:Power3.easeInOut,onUpdate:q};r(c)?(f.left=-5,g.bgLeftPrct=-750):(f.right=-5,g.bgRightPrct=-750),b.to(c,.3,f),b.to(e,.3,{autoAlpha:0,ease:Power3.easeInOut}),b.to(j,.3,g)},y=function(a){m||x(a.currentTarget,n)};o.hide=function(a){m=!0,null===a&&(a=!1),a?(b.to(f,.3,{autoAlpha:0}),b.to(g,.3,{autoAlpha:0}),b.to(h,.3,{autoAlpha:0})):(b.to(f,.3,{autoAlpha:0}),x(g,0),x(h,0))},o.show=function(){m&&z()};var z=function(){null!=k&&b.to(g,1.5,{autoAlpha:n}),null!=l&&b.to(h,1.5,{autoAlpha:n}),i.project&&b.to(f,1.5,{autoAlpha:1}),m=!1};return o.updateState=function(a){i=a,k=d.getNextPageId(i.id),l=d.getPrevPageId(i.id),z(),u()},o});